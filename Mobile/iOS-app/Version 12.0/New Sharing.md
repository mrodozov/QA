###  New Sharing

#### Pr: https://github.com/owncloud/ios-app/pull/1198

Devices: iPhone XR v16, iPad Air v15<br>
Server: oCIS 3.0.0, oC 10.12.1

---

 
| Test Case | Steps | Expected | Result | Related Comment | 
| :-------- | :---- | :------- | :----: | :-------------- | 
|**Private share file**|||||
| Share file viewer | 1. Open actions card of any file<br>2. Select `Sharing`<br>3. Click on `Invite`<br>4. Enter a valid username for sharing<br>5. Select `Viewer` as permission<br>6. Click on `Invite` | Sharee in list of `Shared with`<br>Viewer as role (download, preview and share)<br>Check status in web client<br>File listed in `Shared by me` section of sidebar menu  | P m16 |   |  |
| Share file editor | 1. Open actions card of any file<br>2. Select `Sharing`<br>3. Click on `Invite`<br>4. Enter a valid username for sharing<br>5. Select `Editor` as permission<br>6. Click on `Invite` | Sharee in list of `Shared with`<br>Editor as role (upload, edit, delete, download, preview and share)<br>Check status in web client<br>File listed in `Shared by me` section of sidebar menu   | P m16 |   |  |
| Share file custom I | 1. Open actions card of any file<br>2. Select `Sharing`<br>3. Click on `Invite`<br>4. Enter a valid username for sharing<br>5. Select `Custom` as permission<br>6. Select all options (Edit, Upload, Delete, Share)<br>7. Click on `Save Changes` | Sharee in list of `Shared with`<br>Editor as role (upload, edit, delete, download, preview and share)<br>Check status in web client<br>File listed in `Shared by me` section of sidebar menu   | P m16 |   |  |
| Share file custom II | 1. Open actions card of any file<br>2. Select `Sharing`<br>3. Click on `Invite`<br>4. Enter a valid username for sharing<br>5. Select `Custom` as permission<br>6. Unselect all options, just keep `Read` ticked<br>7. Click on `Save Changes` | Sharee in list of `Shared with`<br>Custom as role (Set detailed permissions)<br>Check status in web client<br>File listed in `Shared by me` section of sidebar menu   | P m16 |  |  |
| Share file custom III | 1. Open actions card of any file<br>2. Select `Sharing`<br>3. Click on `Invite`<br>4. Enter a valid username for sharing<br>5. Select `Custom` as permission<br>6. Unselect all options, but `Share`<br>7. Click on `Save Changes` | Sharee in list of `Shared with`<br>Viewer as role (download, preview and share)<br>Check status in web client<br>File listed in `Shared by me` section of sidebar menu   | P m16 |  |  |
| Share file custom IV | 1. Open actions card of any file<br>2. Select `Sharing`<br>3. Click on `Invite`<br>4. Enter a valid username for sharing<br>5. Select `Custom` as permission<br>6. Do any selection that is not in the previous cases<br>7. Click on `Save Changes` | Sharee in list of `Shared with`<br>Customer as role (Set detailed permissions)<br>Check status in web client<br>File listed in `Shared by me` section of sidebar menu   | P m16 |  |  |
| Share file with group  | 1. Open actions card of any file<br>2. Select `Sharing`<br>3. Click on `Invite`<br>4. Enter a valid group name for sharing<br>5. Select any permission<br>6. Click on `Save Changes` | Group in list of `Shared with`<br>Check status in web client  | P m16 |  |  |
| Share file with several  | 1. Open actions card of any file<br>2. Select `Sharing`<br>3. Click on `Invite`<br>4. Enter several valid group and usernames for sharing<br>5. Select any permission in all of them<br>6. Click on `Save Changes` in all of them | All sharees in list of `Shared with`<br>Check status in web client<br>File listed in `Shared by me` section of sidebar menu   | P m16 |  |  |
| Edit share | 1. Open actions card of any already shared file<br>2. Select `Sharing`<br>3. Click on the sharee name in the list<br>4. Change permissions<br>6. Click on `Save Changes`<br>5. Repeat with other different selections of permissions | Check permissions in web client, that matches the selected ones in every case  | P m16 |  |  |
| Delete share from list| 1. Open actions card of any already shared file<br>2. Select `Sharing`<br>3. Swipe left over the sharee name<br>4. Click on red delete button | Sharee deleted from  `Shared with` list<br> Check in web client that sharee was removed<br>File not listed anymore in `Shared by me` section of sidebar menu | P m16 |  |  |
| Delete share from details | 1. Open actions card of any already shared file<br>2. Select `Sharing`<br>3. Click on the sharee name<br>4. Click on `Unshare` | Sharee deleted from  `Shared with` list<br> Check in web client that sharee was removed<br>File not listed anymore in `Shared by me` section of sidebar menu | P m16 |  |  |
| Add Expiration date | 1. Open actions card of any file<br>2. Select `Sharing`<br>3. Click on `Invite`<br>4. Enter a valid username for sharing<br>5. Select any permission<br>6. Add Expiration date<br>7. Click on `Save Changes` | Sharee in list of `Shared with`<br>Correct expiration date in share<br>Check status in web client  | P m16 |  |  |
| Change Expiration date | 1. Open actions card of any already shared file<br>2. Select `Sharing`<br>3. Click on the sharee name in the list<br>4. Enter a different expiration date<br>5. Click on `Save Changes` | Correct expiration date in share<br>Check status in web client  | P m16 |  |  |
| Remove Expiration date | 1. Open actions card of any already shared file with expiration date<br>2. Select `Sharing`<br>3. Click on the sharee name in the list<br>4. Remove the expiration date<br>5. Click on `Save Changes` | No expiration date in share<br>Check status in web client  | P m16 |  |  |
| Inexistent username | 1. Open actions card of any file<br>2. Select `Sharing`<br>3. Click on `Invite`<br>4. Enter a username that does not exist in server | Error: `No matches`  | P m16 |  |  |
| Duplicate share | 1. Open actions card of any file<br>2. Select `Sharing`<br>3. Click on `Invite`<br>4. Enter a correct username<br>5. Repeat all steps to add the same username| Error: `grantee already has a share on this item`  |  P m16|  |  |
|**Private share folder**|||||
| Share folder viewer | 1. Open actions card of any folder <br>2. Select `Sharing`<br>3. Click on `Invite`<br>4. Enter a valid username for sharing<br>5. Select `Viewer` as permission<br>6. Click on `Invite` | Sharee in list of `Shared with`<br>Viewer as role (download, preview and share)<br>Check status in web client<br>Folder listed in `Shared by me` section of sidebar menu  | P m16 |   |  |
| Share folder editor | 1. Open actions card of any folder <br>2. Select `Sharing`<br>3. Click on `Invite`<br>4. Enter a valid username for sharing<br>5. Select `Editor` as permission<br>6. Click on `Invite` | Sharee in list of `Shared with`<br>Editor as role (upload, edit, delete, download, preview and share)<br>Check status in web client<br>Folder listed in `Shared by me` section of sidebar menu   | P m16 |   |  |
| Share folder custom I | 1. Open actions card of any folder<br>2. Select `Sharing`<br>3. Click on `Invite`<br>4. Enter a valid username for sharing<br>5. Select `Custom` as permission<br>6. Select all options (Edit, Upload, Delete, Share)<br>7. Click on `Save Changes` | Sharee in list of `Shared with`<br>Editor as role (upload, edit, delete, download, preview and share)<br>Check status in web client<br> Folder listed in `Shared by me` section of sidebar menu   | P m16 |   |  |
| Share folder custom II | 1. Open actions card of any folder <br>2. Select `Sharing`<br>3. Click on `Invite`<br>4. Enter a valid username for sharing<br>5. Select `Custom` as permission<br>6. Unselect all options, just keep `Read` ticked<br>7. Click on `Save Changes` | Sharee in list of `Shared with`<br>Custom as role (Set detailed permissions)<br>Check status in web client<br> Folder listed in `Shared by me` section of sidebar menu   | P m16 |  |  |
| Share folder custom III | 1. Open actions card of any folder <br>2. Select `Sharing`<br>3. Click on `Invite`<br>4. Enter a valid username for sharing<br>5. Select `Custom` as permission<br>6. Unselect all options, but `Share`<br>7. Click on `Save Changes` | Sharee in list of `Shared with`<br>Viewer as role (download, preview and share)<br>Check status in web client<br> Folder listed in `Shared by me` section of sidebar menu   |  P m16|  |  |
| Share folder custom IV | 1. Open actions card of any folder <br>2. Select `Sharing`<br>3. Click on `Invite`<br>4. Enter a valid username for sharing<br>5. Select `Custom` as permission<br>6. Do any selection that is not in the previous cases<br>7. Click on `Save Changes` | Sharee in list of `Shared with`<br>Customer as role (Set detailed permissions)<br>Check status in web client<br> Folder listed in `Shared by me` section of sidebar menu   |  P m16|  |  |
| Share folder with group  | 1. Open actions card of any folder <br>2. Select `Sharing`<br>3. Click on `Invite`<br>4. Enter a valid group name for sharing<br>5. Select any permission<br>6. Click on `Save Changes` | Group in list of `Shared with`<br>Check status in web client  | P m16 |  |  |
| Share folder with several  | 1. Open actions card of any folder <br>2. Select `Sharing`<br>3. Click on `Invite`<br>4. Enter several valid group and usernames for sharing<br>5. Select any permission in all of them<br>6. Click on `Save Changes` in all of them | All sharees in list of `Shared with`<br>Check status in web client<br>Folder listed in `Shared by me` section of sidebar menu   | P m16 |  |  |
| Edit share | 1. Open actions card of any already shared folder <br>2. Select `Sharing`<br>3. Click on the sharee name in the list<br>4. Change permissions<br>6. Click on `Save Changes`<br>5. Repeat with other different selections of permissions | Check permissions in web client, that matches the selected ones in every case  | P m16 |  |  |
| Delete share from list| 1. Open actions card of any already shared folder <br>2. Select `Sharing`<br>3. Swipe left over the sharee name<br>4. Click on red delete button | Sharee deleted from  `Shared with` list<br> Check in web client that sharee was removed<br>Folder not listed anymore in `Shared by me` section of sidebar menu | P m16 |  |  |
| Delete share from details | 1. Open actions card of any already shared folder <br>2. Select `Sharing`<br>3. Click on the sharee name<br>4. Click on `Unshare` | Sharee deleted from  `Shared with` list<br> Check in web client that sharee was removed<br>Folder not listed anymore in `Shared by me` section of sidebar menu | P m16 |  |  |
| Add Expiration date | 1. Open actions card of any folder <br>2. Select `Sharing`<br>3. Click on `Invite`<br>4. Enter a valid username for sharing<br>5. Select any permission<br>6. Add Expiration date<br>7. Click on `Save Changes` | Sharee in list of `Shared with`<br>Correct expiration date in share<br>Check status in web client  | P m16 |  |  |
| Change Expiration date | 1. Open actions card of any already shared folder<br>2. Select `Sharing`<br>3. Click on the sharee name in the list<br>4. Enter a different expiration date<br>5. Click on `Save Changes` | Correct expiration date in share<br>Check status in web client  | P m16 |  |  |
| Remove Expiration date | 1. Open actions card of any already shared folder with expiration date<br>2. Select `Sharing`<br>3. Click on the sharee name in the list<br>4. Remove the expiration date<br>5. Click on `Save Changes` | No expiration date in share<br>Check status in web client  | P m16 |  |  |
| Inexistent username | 1. Open actions card of any folder <br>2. Select `Sharing`<br>3. Click on `Invite`<br>4. Enter a username that does not exist in server | Error: `No matches`  | P m16 |  |  |
| Duplicate share | 1. Open actions card of any folder <br>2. Select `Sharing`<br>3. Click on `Invite`<br>4. Enter a correct username<br>5. Repeat all steps to add the same username| Error: `grantee already has a share on this item`  | P m16 |  |  |
| **Public link file** |   |  |
| Create link Viewer| 1. Open actions card of any file <br>2. Select `Sharing`<br>3. Click on `Create Link`<br>4. Select `Viewer` as permission<br>5. Click on `Create Link` | Link in list of `Links`<br>Viewer as role<br>Check status in web client<br>Folder listed in `Shared by link` section of sidebar menu  | P m16 |   |  |
| Create link Editor | 1. Open actions card of any file <br>2. Select `Sharing`<br>3. Click on `Create Link`<br>4. Select `Editor` as permission<br>5. Click on `Create Link` | Link in list of `Links`<br>Editor as role<br>Check status in web client<br>Folder listed in `Shared by link` section of sidebar menu  | P m16 |   |  |
| Add Password | 1. Open actions card of any file <br>2. Select `Sharing`<br>3. Click on `Create Link`<br>4. Add any permission<br>5. Add a password to the link<br>6. Click on `Create Link` | Link in list of `Links`<br>Check status in web client<br>Folder listed in `Shared by link` section of sidebar menu<br>Copying and opening the link in browser ask for the password  | P m16 |   |  |
| Add Expiration date | 1. Open actions card of any file <br>2. Select `Sharing`<br>3. Click on `Create Link`<br>4. Add any permission<br>5. Add a expiration date<br>6. Click on `Create Link` | Link in list of `Links`<br>Check status in web client<br>Folder listed in `Shared by link` section of sidebar menu  |  P m16|   |  |
| Many links | 1. Open actions card of any file <br>2. Select `Sharing`<br>3. Create many links with different permissions levels by clicking on `Create Link` | Link list in `Links` section<br>Check status in web client<br>Links listed in `Shared by link` section of sidebar menu  | P m16 |   |  |
| Edit link | 1. Open actions card of any already shared file by link <br>2. Select `Sharing`<br>3. Open the existing link<br>4. Change permission level, password and expiration date<br>5. Click on `Save Changes`| Check permissions, expiration date and password in web client   | P m16 |  |  |
| Unshare I | 1. Open actions card of any already shared file by link <br>2. Select `Sharing`<br>3.  Swipe left over the existing link | Link not in list of `Links` anymore<<br>Check link removed in web client<br>Folder not listed in `Shared by link` section of sidebar menu anymore  | P m16 |  |  |
| Unshare II | 1. Open actions card of any already shared file by link <br>2. Select `Sharing`<br>3.  Open the existing link<br>4. Click on `Unshare` | Link not in list of `Links` anymore<<br>Check link removed in web client<br>Folder not listed in `Shared by link` section of sidebar menu anymore  | P m16 |  |  |
| **Public link folder** |   |  |
| Create link Viewer| 1. Open actions card of any folder <br>2. Select `Sharing`<br>3. Click on `Create Link`<br>4. Select `Viewer` as permission<br>5. Click on `Create Link` | Link in list of `Links`<br>Viewer as role<br>Check status in web client<br>Folder listed in `Shared by link` section of sidebar menu  |P m16  |   |  |
| Create link Uploader| 1. Open actions card of any folder <br>2. Select `Sharing`<br>3. Click on `Create Link`<br>4. Select `Uploader` as permission<br>5. Click on `Create Link` | Link in list of `Links`<br>Uploader as role<br>Check status in web client<br>Folder listed in `Shared by link` section of sidebar menu  | P m16 |   |  |
| Create link Contributor| 1. Open actions card of any folder <br>2. Select `Sharing`<br>3. Click on `Create Link`<br>4. Select `Contributor` as permission<br>5. Click on `Create Link` | Link in list of `Links`<br> Contributor as role<br>Check status in web client<br>Folder listed in `Shared by link` section of sidebar menu  | P m16 |   |  |
| Create link Editor | 1. Open actions card of any folder <br>2. Select `Sharing`<br>3. Click on `Create Link`<br>4. Select `Editor` as permission<br>5. Click on `Create Link` | Link in list of `Links`<br>Editor as role<br>Check status in web client<br>Folder listed in `Shared by link` section of sidebar menu  | P m16 |   |  |
| Add Password | 1. Open actions card of any folder <br>2. Select `Sharing`<br>3. Click on `Create Link`<br>4. Add any permission<br>5. Add a password to the link<br>6. Click on `Create Link` | Link in list of `Links`<br>Check status in web client<br>Folder listed in `Shared by link` section of sidebar menu<br>Copying and opening the link in browser ask for the password  | P m16  |   |  |
| Add Expiration date | 1. Open actions card of any folder <br>2. Select `Sharing`<br>3. Click on `Create Link`<br>4. Add any permission<br>5. Add a expiration date<br>6. Click on `Create Link` | Link in list of `Links`<br>Check status in web client<br>Folder listed in `Shared by link` section of sidebar menu  | P m16 |   |  |
| Many links | 1. Open actions card of any folder <br>2. Select `Sharing`<br>3. Create many links with different permissions levels by clicking on `Create Link` | Link list in `Links` section<br>Check status in web client<br>Links listed in `Shared by link` section of sidebar menu  | P m16 |   |  |
| Edit link | 1. Open actions card of any already shared folder by link <br>2. Select `Sharing`<br>3. Open the existing link<br>4. Change permission level, password and expiration date<br>5. Click on `Save Changes`| Check permissions, expiration date and password in web client   | P m16 |  |  |
| Unshare I | 1. Open actions card of any already shared folder by link <br>2. Select `Sharing`<br>3.  Swipe left over the existing link | Link not in list of `Links` anymore<<br>Check link removed in web client<br>Folder not listed in `Shared by link` section of sidebar menu anymore  | P m16 |  |  |
| Unshare II | 1. Open actions card of any already shared folder by link <br>2. Select `Sharing`<br>3.  Open the existing link<br>4. Click on `Unshare` | Link not in list of `Links` anymore<br>Check link removed in web client<br>Folder not listed in `Shared by link` section of sidebar menu anymore  |  P m16 |  |  |
| **Copy Private Link** |   |  |
| Copy Private Link | 1. Open actions card of any folder <br>2. Select `Sharing`<br>3. Click on `Copy Private Link`<br>4. Paste the link in any browser | Item opened in browser through the link | P m16 |  |  |
| **Files App** |   |  |
| Share in Files app | 1. Share an item with a user<br>2. Share by link the same item <br>3. Open Files App and select the ownCloud provider<br>3. Long press over the shared item in Files App<br>4. Click on `Share` | Sharing view with all existing shares listed  |  P m16 |  |  |
| **Errors** |   |  |
| No connection | 1. Remove device connection<br>2. Share item with user<br>3. Create new link<br>4. Edit Share/Link<br>5. Remove Share/Link| Sharing dialog dimissed in all cases<br>In Sharing shorcuts in sidebar menu: `Sharing requires an internet connction.`| P m16 |  |  | |
| Server out| 1. Switch server down<br>2. Share item with user<br>3. Create new link<br>4. Edit Share/Link<br>5. Remove Share/Link| Error: No connection | F m16 | Links: incorrect error  |  |